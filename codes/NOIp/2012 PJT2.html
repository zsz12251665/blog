<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
		<link rel="shortcut icon" href="/blog.png"/>
		<title>NOIp 2012 PJT2 - zsz12251665's Blog</title>
		<link rel="stylesheet" type="text/css" href="/codes/style.css"/>
	</head>
	<body>
		<div id="mainframe">
			<h1>zsz12251665's blog</h1>
			<p>Hello, welcome to zsz12251665's blog. </p>
			<hr/>
			<table width="100%">
				<td valign="top" id="bar"><div id="menu"></div></td>
				<td valign="top" id="text">
					<h2 align="center">NOIp 2012 PJT2</h2>
					<time>2017-10-17 19:58 by zsz12251665</time>
					<h3>Problem</h3>
					<section>
						<a target="_blank" href="https://www.luogu.org/problem/show?pid=1076">Luogu</a>
						<br/>
						<a target="_blank" href="https://www.vijos.org/p/1787">Vijos</a>
					</section>
					<h3>Solution</h3>
					<section>
						<p>The problem not only required a simulation but also more than a simulation. You'll find it <abbr title="Time Limit Exceed">TLE</abbr> without some optimization. That is to reduce the time searching the room to the upper floor. It's not hard, just taking the remainder of every number on the board. You'll see that on the following codes. </p>
					</section>
					<h3>Code</h3>
					<section>
						<p>Pascal</p>
						<code>
							var<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;num:array[1..10000,0..100]of longint;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;floor:array[1..10000,0..100]of integer;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;count:array[1..10000]of integer;<strong>//The count array is used to record the rooms with stairs on this floor</strong><br/>
							&nbsp;&nbsp;&nbsp;&nbsp;n,m,x,ans,i,j,t:integer;<br/>
							begin<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;read(n,m);<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;for i:=1 to n do<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count[i]:=0;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for j:=0 to m-1 do<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read(floor[i,j],num[i,j]);<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count[i]:=count[i]+floor[i][j];<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;ans:=0;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;read(x);<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;for i:=1 to n do<strong>//Searching the right stairs to the upper floor</strong><br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans:=(ans+num[i][x]) mod 20123;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t:=(num[i][x]-1) mod count[i]+1;<strong>//It's here where we reduce the time searching by taking the remainder</strong><br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while t-floor[i,x]&gt;0 do<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begin<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t:=t-floor[i,x];<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x:=(x+1) mod m;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;write(ans);<br/>
							end.<br/>
						</code>
						<p>C++</p>
						<code>
							#include&lt;cstdio&gt;<br/>
							long num[10000][100];<br/>
							int floor[10000][100],count[10000];<strong>//The count array is used to record the rooms with stairs on this floor</strong><br/>
							int main()<br/>
							{<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;int n,m,x,ans=0;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;scanf("%d%d",&amp;n,&amp;m);<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;for(int i=0;i&lt;n;i++)<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count[i]=0;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int j=0;j&lt;m;j++)<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanf("%d%ld",&amp;floor[i][j],&amp;num[i][j]);<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count[i]+=floor[i][j];<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;scanf("%d",&amp;x);<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;for(int i=0;i&lt;n;i++)<strong>//Searching the right stairs to the upper floor</strong><br/>
							&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans=(ans+num[i][x])%20123;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int t=(num[i][x]-1)%count[i]+1;<strong>//It's here where we reduce the time searching by taking the remainder</strong><br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(t-floor[i][x]&gt;0)<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t-=floor[i][x];<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x=(x+1)%m;<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;printf("%d",ans);<br/>
							&nbsp;&nbsp;&nbsp;&nbsp;return 0;<br/>
							}<br/>
						</code>
					</section>
				</td>
			</table>
			<address>&copy; 2017 zsz12251665. Powered by zsz12251665. Theme by zsz12251665. </address>
		</div>
		<script type="text/javascript" src="/menu.js"></script>
	</body>
</html>
