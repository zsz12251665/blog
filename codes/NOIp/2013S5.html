<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>NOIp 2013S5 - zsz12251665's Blog</title>
		<link rel="shortcut icon" href="/favicon.ico" />
	</head>
	<body class="matrix">
		<h2 align="center">NOIp 2013S5</h2>
		<time>2017-10-26 16:32 by zsz12251665</time>
		<h3>Problem</h3>
		<section class="btnfield">
			<a target="_blank" href="https://www.luogu.org/problemnew/show/P1970">Luogu</a>
			<a target="_blank" href="https://www.vijos.org/p/1845">Vijos</a>
		</section>
		<h3>Solution</h3>
		<section>
			<p>Well, this problem requires a <abbr title="dynamic planning">dp</abbr> algorithm. We know that the sequence will look like the waves. So we set up two dp arrays <var>#rise#</var> and <var>#drop#</var>. <var>#rise#(_#i#_)</var> keeps the maximum length when <var>#h#(_#i#_)</var> is rised in the end. <var>#drop#(_#i#_)</var> keeps the maximum length when <var>#h#(_#i#_)</var> is dropped in the end. Then we'll obviously have <var>#rise#(_#i#_)=#drop#(_#i#-1_)+1</var> when <var>#h#(_#i#_)&gt;#h#(_#i#-1_)</var> and <var>#drop#(_#i#_)=#rise#(_#i#-1_)+1</var> when <var>#h#(_#i#_)&lt;#h#(_#i#-1_)</var>. Otherwise, we'll have <var>#rise#(_#i#_)=#rise#(_#i#-1_)</var> and <var>#drop#(_#i#_)=#drop#(_#i#-1_)</var> which means we won't keep the flowers here. And it won't take any effects because the answer won't be worse. In the end, we compare the lengths of the two sequences and output the big one. </p>
		</section>
		<h3>Code</h3>
		<section>
			<p>Pascal</p>
			<code>
				var
				`n,i,h,rise,drop,lh,lrise,ldrop:longint;//We just need h[i] and h[i-1], so we can scroll it by h and lh, etc.
				begin
				`lrise:=1;
				`ldrop:=1;
				`read(n,lh);//Take the first one will not make the answer worse either
				`for i:=2 to n do
				``begin
				```read(h);
				```rise:=1;
				```drop:=1;
				```if h&gt;lh then
				````rise:=ldrop+1
				```else
				````rise:=lrise;
				```if h&lt;lh then
				````drop:=lrise+1
				```else
				````drop:=ldrop;
				```lh:=h;//Scroll the space
				```ldrop:=drop;
				```lrise:=rise;
				``end;
				`if ldrop&gt;lrise then//Compare the lengths
				``write(ldrop)
				`else
				``write(lrise);
				end.
			</code>
			<p>C++</p>
			<code>
				#include&lt;cstdio&gt;
				int main()
				{
				`long n,h,rise,drop,lh,lrise=1,ldrop=1;//We just need h[i] and h[i-1], so we can scroll it by h and lh, etc.
				`scanf("%ld%ld",&amp;n,&amp;lh);//Take the first one will not make the answer worse either
				`for(long i=1;i&lt;n;i++)
				`{
				``scanf("%ld",&amp;h);
				``rise=drop=1;
				``if(h&gt;lh)
				```rise=ldrop+1;
				``else
				```rise=lrise;
				``if(h&lt;lh)
				```drop=lrise+1;
				``else
				```drop=ldrop;
				``lh=h;//Scroll the space
				``ldrop=drop;
				``lrise=rise;
				`}
				`if(ldrop&gt;lrise)//Compare the lengths
				``printf("%ld",ldrop);
				`else
				``printf("%ld",lrise);
				`return 0;
				}
			</code>
		</section>
		<script type="text/javascript" src="/add-on/article/article.js"></script>
		<script type="text/javascript" src="/add-on/highlight/highlight.js"></script>
		<script type="text/javascript" src="/add-on/math/math.js"></script>
	</body>
</html>
